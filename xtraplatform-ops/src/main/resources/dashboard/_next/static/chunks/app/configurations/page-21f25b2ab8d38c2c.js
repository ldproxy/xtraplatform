(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{5778:function(e,s,n){Promise.resolve().then(n.bind(n,8037))},8037:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return y}});var r=n(3827),t=n(4090),l=n(1800),a=n(7780),i=n(7907),c=n(7067),o=n(2177),m=n(9881),d=n(1270),u=n(2670),h=n(248),x=n(807),f=n(8196),g=n(1014),j=n(8886);let N=h.z.object({name:h.z.string().min(1,{message:"Name muss min. 1 Zeichen lang sein."}).max(30,{message:"Name darf max. 30 Zeichen lang sein."}).refine(e=>!/[äöüÄÖÜ]/.test(e),{message:"Name darf keine Umlaute enthalten."}),url:h.z.string().min(1,{message:"Url muss min. 1 Zeichen lang sein."}).max(50,{message:"Url darf max. 50 Zeichen lang sein."}).refine(e=>!/[äöüÄÖÜ]/.test(e),{message:"Name darf keine Umlaute enthalten."})}),b=e=>{let{onSubmit:s}=e,[n,l]=(0,t.useState)(null),a=(0,u.cI)({resolver:(0,d.F)(N),mode:"onChange",defaultValues:{name:"",url:""}}),i=async e=>{try{let n=await s(e);n&&(l(n),a.reset())}catch(e){console.error("Fehler beim Absenden des Formulars",e)}};return(0,r.jsxs)(m.cZ,{children:[(0,r.jsxs)(m.fK,{children:[(0,r.jsx)("div",{style:{marginBottom:"15px"},children:(0,r.jsx)(m.$N,{children:"Konfiguration hinzuf\xfcgen"})}),(0,r.jsx)(g.Z,{})]}),(0,r.jsx)(x.l0,{...a,children:(0,r.jsxs)("form",{onSubmit:a.handleSubmit(i),className:"space-y-8",style:{marginBottom:"25px"},children:[(0,r.jsx)(x.Wi,{control:a.control,name:"url",render:e=>{let{field:s}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Url"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(f.I,{placeholder:"Url",...s})}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(x.Wi,{control:a.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Name"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(f.I,{placeholder:"Name",...s})}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(j.z,{style:{fontWeight:"bold"},type:"submit",disabled:!a.formState.isValid,children:"Create"})]})}),n&&!n.success?(0,r.jsx)("div",{style:{color:"red"},children:"Ein Fehler ist aufgetreten."}):n&&n.success?(0,r.jsx)("div",{style:{color:"green"},children:"Konfiguration wurde erfolgreich hinzugef\xfcgt."}):""]})};var v=n(4691),p=n(2830);function y(){let e=(0,p.useReloadInterval)(),[s,n]=(0,t.useState)([]),[d,u]=(0,t.useState)(!0),[h,x]=(0,t.useState)(!1),f=(0,i.useRouter)();(0,t.useEffect)(()=>{(0,l.W2)().then(s=>{if(n(s),v.ov&&console.log("configurations",s),u(!1),e>0){let s=setInterval(()=>{(0,l.W2)().then(e=>{n(e)})},1e3*e);return()=>clearInterval(s)}})},[e]);let g=""===new URLSearchParams(window.location.search).toString(),N=async e=>{try{await (0,l.mv)({name:e.name,url:e.url});let s=await (0,l.W2)();return n(s),{success:!0}}catch(e){return console.error("Fehler beim Erstellen der Konfiguration",e),{success:!1}}};return(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-9 mt-8",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[g&&(0,r.jsx)("a",{onClick:()=>f.back(),className:"font-bold flex items-center cursor-pointer text-blue-500 hover:text-blue-400 mr-2.5",children:(0,r.jsx)(o.wyc,{className:"mr-[-1px] h-6 w-6"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Configurations"})]}),d&&(0,r.jsx)("div",{className:"ml-auto mr-10",children:(0,r.jsx)(a.Z,{color:"#123abc",loading:!0,size:20})}),(0,r.jsxs)(m.Vq,{onOpenChange:e=>x(e),children:[(0,r.jsxs)(m.hg,{className:(0,j.d)({variant:"default"}),style:{fontWeight:"bold"},children:[(0,r.jsx)(o.SPS,{className:"mr-2 h-4 w-4"}),"Neu"]}),(0,r.jsx)(b,{onSubmit:N})]})]}),(0,r.jsx)("div",{className:"justify-between space-y-2",children:(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-1 ",style:{marginBottom:"10px"},children:s.map((e,s)=>(0,r.jsx)(c.Z,{name:e.name,cfgUrl:e.url,setConfigurations:n},"".concat(s)))})})]})}}},function(e){e.O(0,[310,622,547,950,800,67,971,69,744],function(){return e(e.s=5778)}),_N_E=e.O()}]);