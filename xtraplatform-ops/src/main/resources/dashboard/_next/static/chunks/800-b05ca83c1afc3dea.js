(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{2830:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L},useReloadInterval:function(){return E}});var n=r(3827),a=r(3763),s=r.n(a),i=r(4090),l=r(8792),o=r(2169),c=r(1774);function d(e){let{children:t,...r}=e;return(0,n.jsx)(c.f,{...r,children:t})}var u=r(8886),f=r(7907),h=r(3702);function m(e){let{title:t,route:r,icon:a}=e,s=(0,f.usePathname)(),i=a?(0,h.q)(a):null;return(0,n.jsx)(u.z,{variant:s&&s.startsWith(r)?"secondary":"ghost",className:"w-full justify-start",asChild:!0,children:(0,n.jsxs)(l.default,{href:r,children:[i?(0,n.jsx)(i,{className:"mr-2 h-4 w-4"}):null,t]})},t)}var p=r(7134),x=r(2172);function g(e){let{title:t,entries:r,global:a}=e,[s,l]=(0,i.useState)([{name:"",url:"",id:""}]),[o,c]=(0,i.useState)(""),d=(0,f.usePathname)(),g=(0,f.useSearchParams)(),[y,v]=(0,i.useState)(!0),[j,w]=(0,i.useState)(!0),[N,b]=(0,i.useState)(""),E=e=>{let t=new URL(e,window.location.origin);return t.search="",t.toString()},L=g.has("did");return((0,i.useEffect)(()=>{x.hB&&((0,p.Ax)(b),(0,p.R_)().then(e=>l(e)))},[d]),(0,i.useEffect)(()=>{if(s.length>0){let e=s.find(e=>e.id===N);e&&c(e.name)}},[s,d]),(0,i.useEffect)(()=>{v("/home"===d),w("/configurations"===d||"/configurations/details"===d||"/configurations/details/cfg"===d)},[d]),y&&x.hB)?(0,n.jsx)("div",{style:{marginLeft:"30px",marginTop:"10px",fontSize:"0.875rem",color:"#4a4a4a"},children:"No Deployment Selected"}):y&&x.hB||j&&!L&&x.hB?(0,n.jsx)("div",{className:"px-3 py-2",children:(0,n.jsx)("div",{className:"space-y-1",children:a.map(e=>{let{title:t,selected:r,route:a,icon:s}=e;return a?(0,n.jsx)(m,{title:t,route:E(a),icon:s},t):(0,n.jsxs)(u.z,{variant:r?"secondary":"ghost",className:"w-full justify-start",children:[(()=>{let e=s?(0,h.q)(s):null;return e?(0,n.jsx)(e,{className:"mr-2 h-4 w-4"}):null})(),t]},t)})})}):(0,n.jsxs)("div",{className:"px-3 py-2",children:[(0,n.jsx)("h2",{className:"mb-2 px-4 text-lg font-semibold tracking-tight",children:o}),(0,n.jsx)("div",{className:"space-y-1",children:r.filter(e=>!e.ignore).map(e=>{let{title:t,selected:r,route:a,icon:s}=e;return a?(0,n.jsx)(m,{title:t,route:a,icon:s},t):(0,n.jsxs)(u.z,{variant:r?"secondary":"ghost",className:"w-full justify-start",children:[(()=>{let e=s?(0,h.q)(s):null;return e?(0,n.jsx)(e,{className:"mr-2 h-4 w-4"}):null})(),t]},t)})}),(0,n.jsx)("div",{className:"space-y-1 mt-24",children:a.map(e=>{let{title:t,selected:r,route:a,icon:s}=e;return a?(0,n.jsx)(m,{title:t,route:a,icon:s},t):(0,n.jsxs)(u.z,{variant:r?"secondary":"ghost",className:"w-full justify-start",children:[(()=>{let e=s?(0,h.q)(s):null;return e?(0,n.jsx)(e,{className:"mr-2 h-4 w-4"}):null})(),t]},t)})})]})}function y(e){let{className:t,sections:r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("pb-12",t),children:(0,n.jsx)("div",{className:"space-y-4 py-4",children:r.map(e=>{let{title:t,entries:r,global:a}=e;return(0,n.jsx)(g,{title:t,entries:r,global:a},t)})})})}var v=r(2177),j=r(4691);r(3385);var w=r(543),N=e=>{let{reloadInterval:t,setReloadInterval:r}=e,[a,s]=(0,i.useState)(!1),l=(0,i.useRef)(null),o=e=>{l.current&&!l.current.contains(e.target)&&s(!1)};return(0,i.useEffect)(()=>(a?document.addEventListener("mousedown",o):document.removeEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[a]),(0,n.jsxs)("div",{className:"relative group",ref:l,children:[(0,n.jsxs)(w.Ph,{onValueChange:e=>{let n="off"===e?0:Number(e);n!==t&&r(n),s(!1)},value:0===t?"off":null==t?void 0:t.toString(),children:[(0,n.jsxs)(w.i4,{style:{height:"25px",width:"82px"},children:[(0,n.jsx)("div",{className:"flex items-center justify-center ",children:(0,n.jsx)(v.BGW,{className:"h-4 w-4 inline",style:{cursor:"pointer",marginTop:"-2px"},onClick:()=>{s(!a)}})}),(0,n.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 w-px h-full bg-gray-300"})]}),(0,n.jsx)(w.Bw,{children:["off","1","5","30","60"].map((e,t)=>(0,n.jsx)(w.Ql,{value:e,children:e},t))})]}),(0,n.jsx)("div",{className:"absolute left-0 mb-1 hidden group-hover:block bg-white border border-gray-300 rounded shadow-lg p-1",children:"Reload"})]})};let b=(0,i.createContext)(void 0),E=()=>{let e=(0,i.useContext)(b);if(!e)throw Error("useReloadInterval must be used within a ReloadIntervalProvider");return e.reloadInterval};function L(e){let{children:t}=e,[r,a]=(0,i.useState)(""),[c,u]=(0,i.useState)(5),m=(0,f.useSearchParams)(),p=(0,f.usePathname)();return(0,i.useEffect)(()=>{if(x.hB){let e;m&&(j.QM&&console.log("params",m.get("did")),e=m.get("did")),e&&"string"==typeof e&&a(e)}},[p,m]),(0,n.jsx)(b.Provider,{value:{reloadInterval:c},children:(0,n.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,n.jsx)("body",{className:(0,o.cn)("min-h-screen bg-background font-sans antialiased",s().variable),children:(0,n.jsx)(d,{attribute:"class",storageKey:"ldproxy-portal",enableSystem:!0,disableTransitionOnChange:!0,children:(0,n.jsxs)("div",{className:"hidden h-full flex-col md:flex",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start justify-between space-y-2 py-4 px-4 lg:px-8 sm:flex-row sm:items-center sm:space-y-0 md:h-16",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold whitespace-nowrap",children:(0,n.jsxs)(l.default,{href:"/",children:[(0,n.jsx)(v.QGC,{className:"mr-2 h-4 w-4 inline"}),(0,n.jsx)("span",{children:"dashboard"})]})}),(0,n.jsxs)("div",{className:"ml-auto flex w-full space-x-2 sm:justify-end",children:[(0,n.jsx)(N,{reloadInterval:c,setReloadInterval:u}),(0,n.jsx)("a",{href:"/api",target:"_blank",style:{marginRight:"-10px",marginLeft:"18px"},children:(0,n.jsx)("span",{children:"API"})})]})]}),(0,n.jsx)("div",{className:"border-t",children:(0,n.jsx)("div",{className:"bg-background",children:(0,n.jsxs)("div",{className:"grid lg:grid-cols-5",children:[(0,n.jsx)(y,{sections:[{title:"",entries:[{title:"Home",icon:h.c.Home,route:"/home",ignore:x._d},{title:"Deployment",icon:h.c.Play,route:r?"/deployment?did=".concat(r):"/deployment"},{title:"Entities",icon:h.c.Id,route:r?"/entities?did=".concat(r):"/entities"},{title:"Values",icon:h.c.Code,route:r?"/values?did=".concat(r):"/values"}],global:x.f2?[{title:"Configurations",icon:h.c.Reader,route:r?"/configurations?did=".concat(r):"/configurations"}]:[]}],className:"hidden lg:block"}),(0,n.jsx)("div",{className:"col-span-3 lg:col-span-4 lg:border-l",children:(0,n.jsx)("div",{className:"h-full px-4 py-6 lg:px-8",children:t})})]})})})]})})})})})}},8886:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var n=r(3827),a=r(4090),s=r(15),i=r(7742),l=r(2169);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},543:function(e,t,r){"use strict";r.d(t,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return x},i4:function(){return f},ki:function(){return u}});var n=r(3827),a=r(4090),s=r(5139),i=r(3441),l=r(5159),o=r(9259),c=r(2169);let d=s.fC;s.ZA;let u=s.B4,f=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});h.displayName=s.u_.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=s.$G.displayName;let p=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...l}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,n.jsx)(h,{}),(0,n.jsx)(s.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(m,{})]})})});p.displayName=s.VY.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=s.__.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});x.displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=s.Z0.displayName},4691:function(e,t,r){"use strict";r.d(t,{CH:function(){return s},Dh:function(){return n},QM:function(){return l},ke:function(){return a},ov:function(){return i}});let n=!1,a=!1,s=!1,i=!1,l=!1},7134:function(e,t,r){"use strict";r.d(t,{Ax:function(){return i},R_:function(){return n},f8:function(){return a},nA:function(){return s}}),r(2215);let n=async()=>{try{let e=await fetch("/api/deployments");return await e.json()}catch(e){throw console.error("Error:",e),e}},a=async e=>{try{let t=await fetch("/api/deployments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){throw console.error("Error:",e),e}},s=async(e,t,r)=>{let n=new URL(window.location.href),a=new URLSearchParams(n.search).get("did"),s=n.origin,i="".concat(s,"/api"),l={};a?(t(a),l=e.find(e=>e.id===a)||{}):l=e.find(e=>e.apiUrl.includes(i))||{},"name"in l&&Object.keys(l).length>0&&r(l)},i=async e=>{let t=new URL(window.location.href),r=new URLSearchParams(t.search).get("did");r&&e(r)}},2172:function(e,t,r){"use strict";r.d(t,{CF:function(){return d},TQ:function(){return s},XK:function(){return i},_d:function(){return c},f2:function(){return l},hB:function(){return o}});var n=r(4691),a=r(2215);let s=!1,i=!0,l="saas"===a.env.NEXT_PUBLIC_MULTIPLE_DEPLOYMENTS,o=l||"multi"===a.env.NEXT_PUBLIC_MULTIPLE_DEPLOYMENTS,c=!o&&!l;n.ov&&(console.log("IS_DEV",s),console.log("IS_MODE_SAAS",l),console.log("IS_MODE_MULTI",o),console.log("IS_MODE_SINGLE",c)),s&&a.env.DEPLOYMENTS;let d=s&&a.env.NEXT_PUBLIC_USE_DEV_DATA},9266:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(2169),a=r(2172);let s=async function(e,t,r,s,i){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o="";if(a.hB){let e=[];if(0===(e=s?Array.isArray(s)?s:[s]:await (0,n.kG)()).length)return[];o="?apiUrls=".concat(e.join(",")),r&&(o+="&firstOnly=true")}let c="".concat(e).concat(o);a.TQ&&!a.CF&&(c="http://localhost:7081".concat(c));let d=l>0?{signal:AbortSignal.timeout(l)}:{},u=await fetch(c,d);if(!u.ok)throw Error("Failed to fetch data");try{let e=await u.json(),n=e;if(i&&(n=await i(e,u.headers)),r)return n?t(n):[];return t(n)}catch(e){console.error("Error parsing response:",e)}return[]}},3702:function(e,t,r){"use strict";r.d(t,{c:function(){return a},q:function(){return s}});var n=r(2177);let a={Play:"Play",Id:"Id",Code:"Code",ListBullet:"ListBullet",Upload:"Upload",Clock:"Clock",Desktop:"Desktop",Home:"Home",InfoCircled:"InfoCircled",CheckCircled:"CheckCircled",QuestionMark:"QuestionMark",Reader:"Reader",Trash:"Trash",Pencil1:"Pencil1",ExternalLink:"ExternalLink",Cross:"Cross"},s=e=>{switch(e){case a.Play:return n.o1U;case a.Id:return n.Xwj;case a.Code:return n.dNJ;case a.ListBullet:return n.jVc;case a.Upload:return n.rG2;case a.Clock:return n.T39;case a.Desktop:return n.ugZ;case a.Home:return n.tvw;case a.InfoCircled:return n.H4u;case a.CheckCircled:return n.NhS;case a.QuestionMark:return n.pjG;case a.Reader:return n.LOy;case a.Trash:return n.XHJ;case a.Pencil1:return n.JtS;case a.ExternalLink:return n.h0n;case a.Cross:return n.xrR;default:return}}},2169:function(e,t,r){"use strict";r.d(t,{CG:function(){return h},Sq:function(){return f},b5:function(){return d},cn:function(){return o},fO:function(){return m},kG:function(){return c},mh:function(){return u}});var n=r(3167),a=r(1367);r(9539);var s=r(7134),i=r(2172),l=r(9266);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}async function c(){if(i._d)return i.TQ?["http://localhost:7081/api"]:["/api"];let e=[],t=await (0,s.R_)(),r=new URL(window.location.href);if(r&&t.length>0){let n;let a=new URL(r.href),s=new URLSearchParams(a.search).get("did");if(s)n=t.find(e=>e.id===s);else{let e=r.origin,a="".concat(e,"/api");if((n=t.find(e=>e.apiUrl.includes(a)))&&n.apiUrl)return n.apiUrl}n&&n.apiUrl&&(e=n.apiUrl)}return e}let d=e=>0===e.length?[]:e.sort((e,t)=>100===e.percent&&100!==t.percent?1:100===t.percent&&100!==e.percent?-1:-1===e.startedAt&&t.startedAt>-1?1:-1===t.startedAt&&e.startedAt>-1?-1:e.updatedAt<=0&&t.updatedAt>0?1:t.updatedAt<=0&&e.updatedAt>0?-1:t.startedAt-e.startedAt),u=async()=>{try{let e=await (0,l.r)("/api/entities",e=>e),t=await (0,l.r)("/api/values",e=>e),r=e.filter(e=>!e.offline).map(e=>e.response),n=t.filter(e=>!e.offline).map(e=>e.response),a=e=>{if(e.length<=1)return!1;let[t,...r]=e;return r.some(e=>JSON.stringify(e)!==JSON.stringify(t))},s=a(r),i=a(n);return{entitiesDifferent:s,valuesDifferent:i}}catch(e){return console.error("Error comparing data:",e),{entitiesDifferent:!1,valuesDifferent:!1}}},f=async(e,t)=>t.map(t=>{let r=new Set,n=e[t.name],a=!1,s=!1;return n.forEach(e=>{("AVAILABLE"===e.state||"LIMITED"===e.state)&&(r.add(e.url),a=!0),("LIMITED"===e.state||"UNAVAILABLE"===e.state)&&(s=!0)}),{name:t.name,availableUrlsCount:a&&s?r.size:0}}),h=(e,t)=>t.map(t=>{let r=e[t.name],n=new Map;r.forEach(e=>{n.has(e.url)?!0!==e.healthy&&n.set(e.url,!1):n.set(e.url,!0===e.healthy)});let a=Array.from(n.values()).filter(e=>!0===e).length;return{name:t.name,availableUrlsCount:a}}),m=(e,t)=>t.map(t=>{let r=e[t.name],n=new Map;r.forEach(e=>{n.has(e.url)?"UNAVAILABLE"!==e.state&&"OFFLINE"!==e.state&&n.set(e.url,!1):n.set(e.url,"UNAVAILABLE"===e.state||"OFFLINE"===e.state)});let a=Array.from(n.values()).filter(e=>!0===e).length;return{name:t.name,offlineUrlsCount:a}})},3385:function(){}}]);